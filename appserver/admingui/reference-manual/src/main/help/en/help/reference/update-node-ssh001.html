
<!DOCTYPE html>
<!--

    Copyright (c) 2017, 2019 Oracle and/or its affiliates. All rights reserved.

    This program and the accompanying materials are made available under the
    terms of the Eclipse Public License v. 2.0, which is available at
    http://www.eclipse.org/legal/epl-2.0.

    This Source Code may also be made available under the following Secondary
    Licenses when the conditions for such availability set forth in the
    Eclipse Public License v. 2.0 are satisfied: GNU General Public License,
    version 2 with the GNU Classpath Exception, which is available at
    https://www.gnu.org/software/classpath/license.html.

    SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0

-->
<!-- Portions Copyright [2019] [Payara Foundation and/or its affiliates] -->
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>update-node-ssh</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/style.css" rel="stylesheet">
    <script src="https://use.fontawesome.com/96c4d89611.js"></script>
  </head>
  <body>
<table id="doc-title" cellspacing="0" cellpadding="0">
  <tr>
  <td align="left" valign="top">
  <b>update-node-ssh</b><br />
  </td>
  </tr>
</table>
<hr />

<table width="90%" id="top-nav" cellspacing="0" cellpadding="0">
	<colgroup>
		<col width="12%"/>
		<col width="12%"/>
		<col width="*"/>
	</colgroup>
	<tr>
		<td align="left">
		<a href="update-node-ssh.html">
			<span class="vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
			<span style="position:relative;top:-2px;">Previous</span>
		</a>
		</td>

		<td align="left">
		<a href="update-password-alias.html">
			<span class=" vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
			<span style="position:relative;top:-2px;">Next</span>
		</a>
		</td>

		<td align="right">
		<a href="toc.html">
			<span class=" vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
			<span style="position:relative;top:-2px;">Contents</span>
		</a>
		</td>
	</tr>
</table>


<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><a id="update-node-ssh-1"></a><a id="GSRFM00256"></a><a id="update-node-ssh"></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_update_node_ssh">update-node-ssh</h2>
<div class="sectionbody">
<div class="paragraph">
<p>updates the configuration data of a node</p>
</div>
<div id="sthref2299" class="paragraph">
<p>Synopsis</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">asadmin [asadmin-options] update-node-ssh [--help]
[--nodehost node-host]
[--installdir as-install-parent] [--nodedir node-dir]
[--sshport ssh-port] [--sshuser ssh-user]
[--sshkeyfile ssh-keyfile]
[--force={false|true}]
node-name</code></pre>
</div>
</div>
<div id="sthref2300" class="paragraph">
<p>Description</p>
</div>
<div class="paragraph">
<p>The <code>update-node-ssh</code> subcommand updates the configuration data of a
node. This subcommand requires secure shell (SSH) to be configured on
the machine where the domain administration server (DAS) is running and
on the machine where the node resides. You may run this subcommand from
any machine that can contact the DAS.</p>
</div>
<div class="paragraph">
<p>This subcommand can update any node, regardless of whether the node is
enabled for remote communication. If the node is not enabled for remote
communication, the subcommand enables SSH communication for the node and
updates any other specified configuration data.</p>
</div>
<div class="paragraph">
<p>Options of this subcommand specify the new values of the node&#8217;s
configuration data. The default for most options is to leave the
existing value unchanged. However, if this subcommand is run to enable
SSH communication for a node, default values are applied if any of the
following options is omitted:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>--sshport</code></p>
</li>
<li>
<p><code>--sshuser</code></p>
</li>
<li>
<p><code>--sshkeyfile</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>By default, the subcommand fails and the node is not updated if the DAS
cannot contact the node&#8217;s host through SSH. To force the node to be
updated even if the host cannot be contacted through SSH, set the
<code>--force</code> option to <code>true</code>.</p>
</div>
<div class="paragraph">
<p>This subcommand is supported in remote mode only.</p>
</div>
<div id="sthref2301" class="paragraph">
<p>Options</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">asadmin-options</dt>
<dd>
<p>Options for the <code>asadmin</code> utility. For information about these
options, see the <a href="asadmin.html#asadmin-1m"><code>asadmin</code>(1M)</a> help page.</p>
</dd>
<dt class="hdlist1"><code>--help</code></dt>
<dt class="hdlist1"><code>-?</code></dt>
<dd>
<p>Displays the help text for the subcommand.</p>
</dd>
<dt class="hdlist1"><code>--nodehost</code></dt>
<dd>
<p>The name of the host that the node is to represent after the node is
updated.</p>
</dd>
<dt class="hdlist1"><code>--installdir</code></dt>
<dd>
<p>The full path to the parent of the base installation directory of the
\{product---name} software on the host, for example,
<code>/export/glassfish3</code>.</p>
</dd>
<dt class="hdlist1"><code>--nodedir</code></dt>
<dd>
<p>The path to the directory that is to contain \{product---name}
instances that are created on the node. If a relative path is
specified, the path is relative to the as-install directory, where
as-install is the base installation directory of the \{product---name}
software on the host.</p>
</dd>
<dt class="hdlist1"><code>--sshport</code></dt>
<dd>
<p>The port to use for SSH connections to this node&#8217;s host. The default
depends on whether this subcommand is run to enable SSH communication
for the node:<br></p>
<div class="ulist">
<ul>
<li>
<p>If the node is already enabled for communication over SSH, the
default is to leave the port unchanged.</p>
</li>
<li>
<p>If this subcommand is run to enable SSH communication for the node,
the default port is 22.<br>
If the <code>--nodehost</code> is set to <code>localhost</code>, the <code>--sshport</code> option is
ignored.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code>--sshuser</code></dt>
<dd>
<p>The user on this node&#8217;s host that is to run the process for connecting
to the host through SSH. The default depends on whether this
subcommand is run to enable SSH communication for the node:<br></p>
<div class="ulist">
<ul>
<li>
<p>If the node is already enabled for communication over SSH, the
default is to leave the user unchanged.</p>
</li>
<li>
<p>If this subcommand is run to enable SSH communication for the node,
the default is the user that is running the DAS process.<br>
If the <code>--nodehost</code> option is set to <code>localhost</code>, the <code>--sshuser</code>
option is ignored.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code>--sshkeyfile</code></dt>
<dd>
<p>The absolute path to the SSH private key file for user that the
<code>--sshuser</code> option specifies. This file is used for authentication to
the <code>sshd</code> daemon on the node&#8217;s host.<br></p>
</dd>
</dl>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Note:</p>
</div>
<div class="paragraph">
<p>\{product---name} also supports password authentication through the
<code>AS_ADMIN_SSHPASSWORD</code> entry in the password file. The password file
is specified in the <code>--paswordfile</code> option of the
<a href="asadmin.html#asadmin-1m"><code>asadmin</code>(1M)</a> utility.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="literalblock">
<div class="content">
<pre>  If the SSH private key file is protected by a passphrase, the password
  file must contain the `AS_ADMIN_SSHKEYPASSPHRASE` entry. +
  The path to the key file must be reachable by the DAS and the key file
  must be readable by the DAS. +
  The default depends on whether this subcommand is run to enable SSH
  communication for the node: +
  * If the node is already enabled for communication over SSH, the
  default is to leave the key file unchanged.
  * If this subcommand is run to enable SSH communication for the node,
  the default is the key file in the user's `.ssh` directory. If
  multiple key files are found, the subcommand uses the following order
  of preference:
  1.  `id_rsa`
  2.  `id_dsa`
  3.  `identity`
`--force`::
  Specifies whether the node is updated even if validation of the node's
  parameters fails. To validate a node's parameters, the DAS must be
  able to contact the node's host through SSH. Possible values are as
  follows: +
  `false`;;
    The node is not updated if validation of the node's parameters fails
    (default).
  `true`;;
    The node is updated even if validation of the node's parameters
    fails.</pre>
</div>
</div>
<div id="sthref2302" class="paragraph">
<p>Operands</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">node-name</dt>
<dd>
<p>The name of the node to update. The node must exist. Otherwise, an
error occurs.</p>
</dd>
</dl>
</div>
<div id="sthref2303" class="paragraph">
<p>Examples</p>
</div>
<div class="paragraph">
<p><a id="GSRFM792"></a><a id="sthref2304"></a></p>
</div>
<div class="paragraph">
<p>Example 1   Updating the Host That a Node Represents</p>
</div>
<div class="paragraph">
<p>This example updates the host that the node <code>lssh</code> represents to <code>sj04</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">asadmin&gt; update-node-ssh --nodehost sj04 lssh
Command update-node-ssh executed successfully.</code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="GSRFM793"></a><a id="sthref2305"></a></p>
</div>
<div class="paragraph">
<p>Example 2   Forcing the Update of a Node</p>
</div>
<div class="paragraph">
<p>This example forces the update of the node <code>sj01</code> to enable the node to
communicate over SSH.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">asadmin&gt; update-node-ssh --force sj01
Warning: some parameters appear to be invalid.
Could not connect to host sj01 using SSH.
Could not authenticate. Tried authenticating with specified key at
/home/gfuser/.ssh/id_rsa
Continuing with node update due to use of --force.
Command update-node-ssh executed successfully.</code></pre>
</div>
</div>
<div id="sthref2306" class="paragraph">
<p>Exit Status</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">0</dt>
<dd>
<p>command executed successfully</p>
</dd>
<dt class="hdlist1">1</dt>
<dd>
<p>error in executing the command</p>
</dd>
</dl>
</div>
<div id="sthref2307" class="paragraph">
<p>See Also</p>
</div>
<div class="paragraph">
<p><a href="asadmin.html#asadmin-1m"><code>asadmin</code>(1M)</a></p>
</div>
<div class="paragraph">
<p><a href="create-node-dcom.html#create-node-dcom-1"><code>create-node-dcom</code>(1)</a>,
<a href="create-node-config.html#create-node-config-1"><code>create-node-config</code>(1)</a>,
<a href="create-node-ssh.html#create-node-ssh-1"><code>create-node-ssh</code>(1)</a>,
<a href="delete-node-config.html#delete-node-config-1"><code>delete-node-config</code>(1)</a>,
<a href="delete-node-dcom.html#delete-node-dcom-1"><code>delete-node-dcom</code>(1)</a>,
<a href="delete-node-ssh.html#delete-node-ssh-1"><code>delete-node-ssh</code>(1)</a>,
<a href="install-node.html#install-node-1"><code>install-node</code>(1)</a>,
<a href="install-node-dcom.html#install-node-dcom-1"><code>install-node-dcom</code>(1)</a>,
<a href="install-node-ssh.html#install-node-ssh-1"><code>install-node-ssh</code>(1)</a>,
<a href="list-nodes.html#list-nodes-1"><code>list-nodes</code>(1)</a>,
<a href="uninstall-node.html#uninstall-node-1"><code>uninstall-node</code>(1)</a>,
<a href="uninstall-node-dcom.html#uninstall-node-dcom-1"><code>uninstall-node-dcom</code>(1)</a>,
<a href="uninstall-node-ssh.html#uninstall-node-ssh-1"><code>uninstall-node-ssh</code>(1)</a>,
<a href="update-node-config.html#update-node-config-1"><code>update-node-config</code>(1)</a>,
<a href="update-node-ssh.html#update-node-dcom-1"><code>update-node-dcom</code>(1)</a></p>
</div>
</div>
</div>

<hr />

<table width="90%" id="bottom-nav" cellspacing="0" cellpadding="0">
	<colgroup>
		<col width="12%"/>
		<col width="12%"/>
		<col width="*"/>
	</colgroup>
	<tr>		
		<td align="left">
		<a href="update-node-ssh.html">
			<span class=" vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
			<span style="position:relative;top:-2px;">Previous</span>
		</a>
		</td>

		<td align="left">
		<a href="update-password-alias.html">
			<span class="vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
			<span style="position:relative;top:-2px;">Next</span>
		</a>
		</td>

		<td align="right">
		<a href="toc.html">
			<span class="vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
			<span style="position:relative;top:-2px;">Contents</span>
		</a>
		</td>
	</tr>
</table>

<span id="copyright">
        <img src="/resource/reference/img/eclipse_foundation_logo_tiny.png" height="20px" alt="Eclipse Foundation Logo" align="top"/>&nbsp;            
        <span >Copyright&nbsp;&copy;&nbsp;2019,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.</span>
</span>

</body>
</html>
